# Эмиссия

1. Эмиссия (`e`) — процедура ввода новых [U](./u) в [UDB](./udb).
2. Эмиссия осуществляется при регистрации нового [товара](./goods) в [UDB](./udb).
3. Единица [товара](./goods) не должна регистрироваться дважды одновременно; попытка 
повторной регистрации без [Изъятия](./recall) считается [Нарушением](./violation).
4. Эмиссия обеспечивает рост масс [U](./u), гарантированно эквивалетный 
материальной ценности [товара](./goods).
5. Эмиссия дает основание для проведения [валидации](./validation).
6. Обратным действием для [эмиссии](./emission) является [отзыв](./recall).



# Виды эмиссии

1. Эмиссия бывает двух видов:
   1. [Стартовая](#стартовая-эмиссия) — при невозможности стоимостной оценки 
   товара в [U](./u) на основе данных [UDB](./udb).
   2. [Рабочая](#рабочая-эмиссия) — для товаров, для которых возможна оценка в 
   [U](./u).



## Стартовая эмиссия

1. Стартовая эмиссия выполняется при невозможности определения стоимости товара 
в [U](./u) основываясь на данных [UDB](./udb).
2. Рассчитвается одним из следующих способов:
    1. при нулевой стоимости [UDB](./udb) (первый товар) эмиссия устанавливается в
    значение 1.0, при этом товар становится эталонной мерой конкретной [UDB](./udb).
    0. при стоимости [UDB](./udb) отличной от 0, оценка выполняется по формуле
    `e = cost_ext / cost_sde_ext * q * ke` где:
        1. e - объем эмиссии
        0. cost_ext - стоимость товара в эталонной на момент эмиссии внешней
        валюте.
        0. cost_sde_ext - совокупная стоимость [UDB](./udb) в эталонной валюте на момент
        эмисси, при этом совокупная стоимость [UDB](./udb).
        0. q - [количество товара](./q).
        0. ke - [публичный нормировочный коэффициент](./ke).
    0. при необходимости на основе экспертной оценки по усмотрению [UDB](./udb).



## Рабочая эмисиия

1. Выполняется при возможности определения стоимости товара в [U](./u).
2. Формула: `e = cost_u * q * ke`, где:
   - `e` — объём [эмиссии](./emission)
   - `cost_u` — стоимость [товара](./goods) в [U](./u) по данным [UDB](./udb)
   - `q` — [количество товара](./q)
   - `ke` — [публичный нормировочный коэффициент](./ke)



# Распределение эмиссии

1. Эмитированные [U](./u) распределяются между:
    1. [Резервом](./reserv) [UDB](./udb) и пополняют [резерв](./reserv), 
    отражается публичном балансе [UDB](./udb).
    2. [UDB](./udb) как пользователем, для компенсации организационных расходов 
    [UDB](./udb).
    3. [Пользователем](./user), владелецем [товара](./goods), как 
    вознаграждение за регистрацию товара, отражается положительно на балансе 
    [Пользователем](./user).



## Коэффициенты распределения эмисии

1. Первоначально определяется [эмиссионный коэффициент резерва](./k_er).
2. Вторым шагом определяется [сумма эмиссии в резерв](./u_er) [UDB](./udb).
3. Третим шагом определяется [сумма эмиссии в оборот](./u_ec)
4. Далее [сумма эмиссии в оборот](./u_ec) делится между [пользователем](./user) 
и [udb](./udb) по [коэффициенту вознаграждения](./k_ec) на 
[сумму эмиссионного вознаграждения пользователя](u_eu) и на 
[сумму эмиссионного вознаграждения системы](u_es).
5. При этом выполняется:
```
    e = u_er + u_ec = u_er + u_eu + u_es
```



## Зачисление вознаграждения

1. Зачисление вознаграждения [пользователю](./user) осуществляется на указанный
[счет](./count) пользователя, после чего пользователь может использовать
полученные [U](./u) для расчетов с другими пользователям.



## Диаграмма распределения эмиссии

4. Итоговое распределение `эмисии` отражено на следующей диаграмме:
```mermaid
flowchart TD
    %% Базовая сумма эмиссии
    e[Сумма <br> эмиссии<br>e]

    %% Эмиссионный коэффициент резерва
    e -->|u_er = e * (k_tr / (k_tr + k_er))| u_er[Эмиссия в <br> резерв UDB]
    e -->|u_ec = e - u_er| u_ec[Сумма эмиссии <br> в оборот]

    %% Распределение оборота
    u_ec -->|u_eu = u_ec * k_ec| u_user[Эмиссионное вознаграждение <br> пользователя]
    u_ec -->|u_es = u_ec * (1 - k_ec)| u_udb[Эмиссионное вознаграждение <br> системы UDB]

    %% Зачисление
    u_user --> |зачисление| circulation(Оборот)
    u_udb --> |зачисление| circulation
    u_er --> |зачисление| reserv(Резерв)
```
